import{a as M,u as v,r as c,j as e,B as p,T as A,C as $}from"./index-D1onh7K2.js";import{H as W,O as E}from"./Header-CmCE-9ly.js";import{t as G}from"./js.cookie-gOnXwpkR.js";import{d as L,L as w,A as B,D as O}from"./AdapterDayjs-si-NqTZq.js";import{l as s}from"./lodash-CegKfhPD.js";import{i as H,g as P,f as Y}from"./dataProcessors-DDTiAf4a.js";import{T as q,P as I}from"./TextField-BRu8PxbS.js";import{T as z,a as F,b as N,c as d,d as U}from"./TableRow-Cd7f5tq7.js";import{T as n}from"./TableCell-UEN1-r0d.js";import{M as m}from"./Tooltip-CNJLcsew.js";import"./api-BXAxpoKY.js";import"./IconButton-C-oIeFUS.js";import"./InputAdornment-CuSmUKqf.js";const le=()=>{var h,b,u,j,f,_;const C=M(),y=v(),a=G(y.palette.mode),[x,D]=c.useState(L()),[k,g]=c.useState(!1),[t,T]=c.useState({}),[J,S]=c.useState(!0);c.useEffect(()=>{(async()=>{try{g(!0);const o=await E.getReportList(x.format("YYYY-MM-DD"));T(o)}catch(o){console.error("Error fetching menu list:",o)}finally{g(!1)}})()},[x]);const R=r=>{r&&!r.isSame(x,"day")&&D(r),S(!1)};return e.jsxs(p,{m:"20px",children:[e.jsx(W,{title:"Report",profileScreen:!0}),e.jsxs(p,{mt:"40px",height:"75vh",flex:1,sx:{"& .MuiDataGrid-root":{border:"none"},"& .MuiDataGrid-cell":{border:"none"},"& .name-column--cell":{color:a.greenAccent[300]},"& .MuiDataGrid-columnHeaders":{backgroundColor:a.blueAccent[700],borderBottom:"none"},"& .MuiDataGrid-virtualScroller":{backgroundColor:a.primary[400]},"& .MuiDataGrid-footerContainer":{borderTop:"none",backgroundColor:a.blueAccent[700]},"& .MuiCheckbox-root":{color:`${a.greenAccent[200]} !important`},"& .MuiDataGrid-iconSeparator":{color:a.primary[100]}},children:[e.jsxs(p,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(w,{dateAdapter:B,children:e.jsx(O,{label:"Date",value:x,onChange:R,renderInput:r=>e.jsx(q,{...r,fullWidth:!0,variant:"filled",sx:{gridColumn:"span 1"}})})}),e.jsx(A,{variant:"subtitle1",sx:{fontWeight:600,cursor:"pointer"},onClick:()=>C("/charges"),onMouseOver:r=>r.target.style.cursor="pointer",children:"Charges"})]}),k?e.jsx($,{}):e.jsx(z,{component:I,children:e.jsxs(F,{sx:{border:"1px solid rgba(224, 224, 224, 1)",borderCollapse:"collapse"},children:[e.jsxs(N,{children:[e.jsxs(d,{sx:{backgroundColor:a.blueAccent[700]},children:[e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},rowSpan:2,children:"Room No"}),e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},colSpan:((h=t==null?void 0:t.breakfast_item_list)==null?void 0:h.length)||0,children:"Breakfast"}),e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},colSpan:((b=t==null?void 0:t.lunch_item_list)==null?void 0:b.length)||0,children:"Lunch"}),e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},colSpan:((u=t==null?void 0:t.dinner_item_list)==null?void 0:u.length)||0,children:"Dinner"})]}),e.jsxs(d,{sx:{backgroundColor:a.blueAccent[700]},children:[(j=t==null?void 0:t.breakfast_item_list)==null?void 0:j.map((r,o)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:e.jsx(m,{title:r.real_item_name,arrow:!0,children:e.jsx("span",{children:r.item_name})})},`breakfast-${o}`)),(f=t==null?void 0:t.lunch_item_list)==null?void 0:f.map((r,o)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:e.jsx(m,{title:r.real_item_name,arrow:!0,children:e.jsx("span",{children:r.item_name})})},`lunch-${o}`)),(_=t==null?void 0:t.dinner_item_list)==null?void 0:_.map((r,o)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:e.jsx(m,{title:r.real_item_name,arrow:!0,children:e.jsx("span",{children:r.item_name})})},`dinner-${o}`))]})]}),e.jsxs(U,{children:[H(t)?e.jsx(d,{children:e.jsx(n,{align:"center",colSpan:4,sx:{textAlign:"center",fontWeight:600,fontSize:"1.1rem"},children:"No Report Found"})}):e.jsxs(d,{sx:{backgroundColor:a.blueAccent[800]},children:[e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)"},children:"Total"}),s.map(s.get(t,"breakfast_item_list",[]),(r,o)=>e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)",color:"red"},children:r.total_count},`btot-${o}`)),s.map(s.get(t,"lunch_item_list",[]),(r,o)=>e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)",color:"red"},children:r.total_count},`ltot-${o}`)),s.map(s.get(t,"dinner_item_list",[]),(r,o)=>e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)",color:"red"},children:r.total_count},`dtot-${o}`))]}),s.map(P(t),r=>{const o=Y(t,r);return e.jsxs(d,{children:[e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:r}),s.map(o.breakfast.quantity,(i,l)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:i},`b-${l}`)),s.map(o.lunch.quantity,(i,l)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:i},`l-${l}`)),s.map(o.dinner.quantity,(i,l)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:i},`d-${l}`))]},r)})]})]})})]})]})};export{le as default};
