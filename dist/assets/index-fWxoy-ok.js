import{u as ke,b as ve,r as w,j as n,d as P,B as f,T as C,C as Ae}from"./index-B2zZfDn8.js";import{e as oe,O as ae,H as we,c as Me}from"./Header-Bp_wk4-C.js";import{t as Re,y as G,L as $e,C as U}from"./js.cookie-D-3Lvjpx.js";import{d as N,L as Le,A as We,D as Ee}from"./AdapterDayjs-BvR1z9qa.js";import{a as Se,b as Qe,c as K,d as Ne,k as Oe,t as Te,T as Ye,h as V,j as Fe,l as Ge,r as He}from"./index-CJWS2IQq.js";import{u as ze}from"./useCommon-CNN-iIuq.js";import{_ as Pe}from"./lodash-D0MkLC-x.js";import{D as Be,a as Je,b as Ue}from"./InputAdornment-DGZzny-l.js";import{D as Ke}from"./DialogTitle-ImrYj_xZ.js";import{T as Ve}from"./TextField-Dbx5wLu6.js";import"./api-CXf06R5e.js";import"./IconButton-Cglkh1w2.js";import"./KeyboardArrowRight-BA7d5Ohy.js";const{breakfastEndHour:X,lunchEndHour:Z,dinnerEndHour:Xe}=Fe.mealTimes,mn=()=>{var re,ie;const le=ke(),$=Re(le.palette.mode),D=ve(),H=(re=D.state)==null?void 0:re.roomNo,ee=(ie=D.state)==null?void 0:ie.selectedDate,[R,ce]=w.useState(ee?N(ee):N()),[de,ne]=w.useState(!1),[u,j]=w.useState({}),[z,pe]=w.useState({}),me=w.useCallback(()=>{const o=N();return o.hour()>Z||o.hour()===Z&&o.minute()>0?2:o.hour()>X||o.hour()===X&&o.minute()>0?1:0},[]),[E,he]=w.useState(me()),Q=w.useMemo(()=>Se(R),[R]),A=w.useMemo(()=>Qe(R),[R]),O=w.useMemo(()=>Q&&K(X),[Q]),T=w.useMemo(()=>Q&&K(Z),[Q]),Y=w.useMemo(()=>Q&&K(Xe),[Q]),[a]=ze("userData",null),[M,F]=w.useState(1),[ge,B]=w.useState(!1),[v,fe]=w.useState(oe);w.useEffect(()=>{fe(Ne(a,oe,Me))},[a]);const ye=()=>{F(o=>o>=10?(G.warn(v.maximumGuestWarn),o):o+1)},ue=()=>{const o=Ge(u);F(c=>c>1?c-1<o?(B(!0),c):c-1:1)},_e=()=>{B(!1),j(He(u)),F(o=>o>1?o-1:1)},te=()=>{B(!1)};w.useEffect(()=>{se()},[R]);const se=async()=>{try{ne(!0);const o=Oe(a,H),c={date:R.format("YYYY-MM-DD"),room_id:o},t=await ae.getGuestOrderList(c),i=Te(t);F(Pe.get(t,"occupancy",1)),pe(i),j(i)}catch(o){console.error("Error fetching menu list:",o),G.error("Failed to load guest order data")}finally{ne(!1)}},xe=o=>{ce(o),j(c=>({...c,breakfastCategories:(c.breakfastCategories||[]).map(t=>({...t,entreeItems:(t.entreeItems||[]).map(i=>({...i,qty:0})),alternativeItems:(t.alternativeItems||[]).map(i=>({...i,qty:0}))})),lunchCategories:(c.lunchCategories||[]).map(t=>({...t,entreeItems:(t.entreeItems||[]).map(i=>({...i,qty:0})),alternativeItems:(t.alternativeItems||[]).map(i=>({...i,qty:0}))})),dinnerCategories:(c.dinnerCategories||[]).map(t=>({...t,entreeItems:(t.entreeItems||[]).map(i=>({...i,qty:0})),alternativeItems:(t.alternativeItems||[]).map(i=>({...i,qty:0}))}))})),F(c=>c>1?c-1:1)};function Ce(o,c){const t=(m=[])=>m.map(g=>({item_id:g.id,qty:g.qty,order_id:g.order_id||0,preference:(g.preference||[]).filter(_=>_.is_selected).map(_=>_.id).join(","),item_options:(g.options||[]).filter(_=>_.is_selected).map(_=>_.id).join(",")})),i=(m,g)=>{const _=[...t(m.breakfastCategories.flatMap(b=>[...b.entreeItems,...b.alternativeItems]))],L=[...t(g.breakfastCategories.flatMap(b=>[...b.entreeItems,...b.alternativeItems]))],S=b=>L.find(y=>y.item_id===b.item_id&&y.order_id===b.order_id),W=[];return _.forEach(b=>{const y=S(b);y?(b.qty!==y.qty||b.preference!==y.preference||b.item_options!==y.item_options)&&W.push(b):b.qty>0&&W.push(b)}),L.forEach(b=>{const y=`${b.item_id}_${b.order_id}`;!_.some(x=>`${x.item_id}_${x.order_id}`===y)&&b.qty>0&&W.push({...b,qty:0,preference:"",item_options:""})}),W};function h(m,g){const _=(y=[])=>y.map(x=>({item_id:x.id,qty:x.qty,order_id:x.order_id||0,preference:(x.preference||[]).filter(I=>I.is_selected).map(I=>I.id).join(","),item_options:(x.options||[]).filter(I=>I.is_selected).map(I=>I.id).join(",")})),L=[..._(m.lunchCategories.flatMap(y=>[...y.entreeItems,...y.alternativeItems]))],S=[..._(g.lunchCategories.flatMap(y=>[...y.entreeItems,...y.alternativeItems]))],W=y=>S.find(x=>x.item_id===y.item_id&&x.order_id===y.order_id),b=[];return L.forEach(y=>{const x=W(y);x?(y.qty!==x.qty||y.preference!==x.preference||y.item_options!==x.item_options)&&b.push(y):y.qty>0&&b.push(y)}),S.forEach(y=>{const x=`${y.item_id}_${y.order_id}`;!L.some(I=>`${I.item_id}_${I.order_id}`===x)&&y.qty>0&&b.push({...y,qty:0,preference:"",item_options:""})}),b}function d(m,g){const _=(y=[])=>y.map(x=>({item_id:x.id,qty:x.qty,order_id:x.order_id||0,preference:(x.preference||[]).filter(I=>I.is_selected).map(I=>I.id).join(","),item_options:(x.options||[]).filter(I=>I.is_selected).map(I=>I.id).join(",")})),L=[..._(m.dinnerCategories.flatMap(y=>[...y.entreeItems,...y.alternativeItems]))],S=[..._(g.dinnerCategories.flatMap(y=>[...y.entreeItems,...y.alternativeItems]))],W=y=>S.find(x=>x.item_id===y.item_id&&x.order_id===y.order_id),b=[];return L.forEach(y=>{const x=W(y);x?(y.qty!==x.qty||y.preference!==x.preference||y.item_options!==x.item_options)&&b.push(y):y.qty>0&&b.push(y)}),S.forEach(y=>{const x=`${y.item_id}_${y.order_id}`;!L.some(I=>`${I.item_id}_${I.order_id}`===x)&&y.qty>0&&b.push({...y,qty:0,preference:"",item_options:""})}),b}const r=m=>[...t(m.breakfastCategories),...t(m.lunchCategories),...t(m.dinnerCategories)],l=r(o),p=r(z),q=m=>p.find(g=>g.item_id===m.item_id&&g.order_id===m.order_id),k=new Map(l.map(m=>[`${m.item_id}_${m.order_id}`,m])),s=[];l.forEach(m=>{const g=q(m);g?(m.qty!==g.qty||m.preference!==g.preference||m.item_options!==g.item_options)&&s.push(m):m.qty>0&&s.push(m)}),p.forEach(m=>{const g=`${m.item_id}_${m.order_id}`;!k.has(g)&&m.qty>0&&s.push({...m,qty:0,preference:"",item_options:""})});let e=a==null?void 0:a.rooms.find(m=>m.name===H);return{date:c.format("YYYY-MM-DD"),room_id:e==null?void 0:e.id,orders_to_change:JSON.stringify([...i(o,z),...h(o,z),...d(o,z)]),occupancy:M,is_for_guest:1,is_brk_tray_service:o==null?void 0:o.is_brk_tray_service,is_lunch_tray_service:o==null?void 0:o.is_lunch_tray_service,is_dinner_tray_service:o==null?void 0:o.is_dinner_tray_service}}const je=(o,c,t)=>{const i=d=>Array.isArray(d)?d.map(r=>{const l=c.findIndex(p=>p===r.id);return l!==-1?{...r,order_id:t[l]}:r}):d,h=d=>Array.isArray(d)?d.map(r=>({...r,entreeItems:i(r.entreeItems),alternativeItems:i(r.alternativeItems)})):d;return{...o,breakfastCategories:h(o.breakfastCategories),lunchCategories:h(o.lunchCategories),dinnerCategories:h(o.dinnerCategories)}},J=async(o,c)=>{try{const t=Ce(o,c);let i=await ae.updateGuestOrder(t);i.ResponseText==="success"?(i!=null&&i.item_id&&(i!=null&&i.order_id)&&(j(h=>je(h,i.item_id,i.order_id)),se(c.format("YYYY-MM-DD"))),G.success("Guest Order submitted successfully!")):G.error(i.ResponseText||"Guest Order submission failed.")}catch(t){G.error("An error occurred while submitting the order."),console.error(t)}},be=(a==null?void 0:a.breakfast_guideline)&&u.breakfastCategories&&u.breakfastCategories.length>0,qe=(a==null?void 0:a.lunch_guideline)&&u.lunchCategories&&u.lunchCategories.length>0,Ie=(a==null?void 0:a.dinner_guideline)&&u.dinnerCategories&&u.dinnerCategories.length>0;return n.jsxs(n.Fragment,{children:[n.jsxs(Be,{open:ge,onClose:te,maxWidth:"xs",fullWidth:!0,children:[n.jsx(Ke,{sx:{textAlign:"center",fontWeight:600},children:"Remove All Items?"}),n.jsxs(Je,{sx:{textAlign:"center",fontSize:16},children:["Order is already selected for ",[...(u.breakfastCategories||[]).flatMap(o=>[...o.entreeItems||[],...o.alternativeItems||[]]),...(u.lunchCategories||[]).flatMap(o=>[...o.entreeItems||[],...o.alternativeItems||[]]),...(u.dinnerCategories||[]).flatMap(o=>[...o.entreeItems||[],...o.alternativeItems||[]])].reduce((o,c)=>o+(c.qty||0),0)," guest(s).",n.jsx("br",{}),"If you continue, it will remove all items from the order."]}),n.jsxs(Ue,{sx:{justifyContent:"center",pb:2},children:[n.jsx(P,{onClick:te,variant:"outlined",color:"primary",children:"Cancel"}),n.jsx(P,{onClick:_e,variant:"contained",color:"error",children:"Continue"})]})]}),n.jsxs(f,{m:"20px",children:[n.jsx(we,{title:H?`${H} ${v.guest}`:`${a==null?void 0:a.room_id}  ${v.guest}`,icon:"",editRoomsDetails:!1,isGuest:!1,profileScreen:!0}),n.jsx($e,{}),n.jsxs(f,{mt:"40px",height:"75vh",flex:1,sx:{"& .MuiDataGrid-root":{border:"none"},"& .MuiDataGrid-cell":{border:"none"},"& .name-column--cell":{color:$.greenAccent[300]},"& .MuiDataGrid-columnHeaders":{backgroundColor:$.blueAccent[700],borderBottom:"none"},"& .MuiDataGrid-virtualScroller":{backgroundColor:$.primary[400]},"& .MuiDataGrid-footerContainer":{borderTop:"none",backgroundColor:$.blueAccent[700]},"& .MuiCheckbox-root":{color:`${$.greenAccent[200]} !important`},"& .MuiDataGrid-iconSeparator":{color:$.primary[100]}},children:[n.jsx(f,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:n.jsx(Le,{dateAdapter:We,adapterLocale:(a==null?void 0:a.langCode)==="cn"?"zh-cn":"en",children:n.jsx(Ee,{label:"Date",value:R,onChange:xe,renderInput:o=>n.jsx(Ve,{...o,fullWidth:!0,variant:"filled",sx:{gridColumn:"span 1"}})})})}),n.jsx(f,{sx:{textAlign:"center"},children:n.jsx(C,{children:(a==null?void 0:a.language)===1?`${N(R).locale("zh-cn").format("MMMM")} ${N(R).format("D, YYYY")}`:N(R).format("MMMM D, YYYY")})}),n.jsx(f,{sx:{bgcolor:"#f5f5f5",borderRadius:2,p:1},children:n.jsxs(f,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[n.jsx(C,{variant:"h6",sx:{fontWeight:600},children:v.noOfGuests}),n.jsxs(f,{display:"flex",alignItems:"center",children:[n.jsx(P,{variant:"outlined",sx:{minWidth:36,mx:1},onClick:ue,disabled:A,children:"-"}),n.jsx(C,{sx:{mx:1},children:M}),n.jsx(P,{variant:"outlined",sx:{minWidth:36,mx:1},onClick:ye,disabled:A,children:"+"})]})]})}),de?n.jsx(Ae,{}):n.jsxs(n.Fragment,{children:[n.jsxs(Ye,{value:E,onChange:(o,c)=>he(c),indicatorColor:"primary",textColor:"primary",sx:{mb:2},children:[n.jsx(V,{label:v.brk}),n.jsx(V,{label:v.lunch}),n.jsx(V,{label:v.dnr})]}),E===0&&n.jsx(n.Fragment,{children:n.jsxs(f,{children:[Array.isArray(u.breakfastCategories)&&u.breakfastCategories.map((o,c)=>n.jsxs(f,{mb:3,children:[n.jsx(C,{variant:"h6",sx:{mb:2,fontWeight:600,backgroundColor:"#f5f5f5",px:2,py:1,borderRadius:1,textAlign:"center"},children:(a==null?void 0:a.langCode)==="cn"&&o.cat_name_cn&&o.cat_name_cn.trim()!==""?o.cat_name_cn:o.cat_name}),o.entreeItems.map(t=>n.jsxs(f,{mb:1,children:[n.jsxs(f,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[n.jsxs(f,{display:"flex",alignItems:"center",children:[t.image&&n.jsx("img",{src:t.image,alt:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name,style:{width:64,height:64,objectFit:"cover",borderRadius:8,marginRight:12}}),n.jsx(C,{children:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name})]}),n.jsxs(f,{display:"flex",alignItems:"center",children:[n.jsx("button",{onClick:()=>j(i=>({...i,breakfastCategories:i.breakfastCategories.map((h,d)=>d===c?{...h,entreeItems:h.entreeItems.map(r=>{if(r.id===t.id){const l=Math.max((r.qty||0)-1,0);return{...r,qty:l,options:(r.options||[]).length>0&&l===0?r.options.map((p,q)=>({...p,is_selected:q===0?1:0})):r.options,preference:(r.preference||[]).length>0&&l===0?r.preference.map(p=>({...p,is_selected:0})):r.preference}}return(r.qty||0)===0?{...r,options:(r.options||[]).length>0?r.options.map((l,p)=>({...l,is_selected:p===0?1:0})):r.options,preference:(r.preference||[]).length>0?r.preference.map(l=>({...l,is_selected:0})):r.preference}:r})}:h)})),style:{marginRight:8},disabled:t.qty===0||O||A,children:"-"}),n.jsx(C,{children:t.qty||0}),n.jsx("button",{onClick:()=>{j(i=>{var l,p,q,k;const h=(((p=(l=i.breakfastCategories[c])==null?void 0:l.entreeItems)==null?void 0:p.reduce((s,e)=>s+(e.qty||0),0))||0)+(((k=(q=i.breakfastCategories[c])==null?void 0:q.alternativeItems)==null?void 0:k.reduce((s,e)=>s+(e.qty||0),0))||0);let d=[...i.breakfastCategories[c].entreeItems],r=[...i.breakfastCategories[c].alternativeItems||[]];if(h>=M){let s=!1;r=r.map(e=>{if(!s&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}),s||(d=d.map(e=>{if(!s&&e.id!==t.id&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}))}return d=d.map(s=>s.id===t.id?{...s,qty:(s.qty||0)+1,options:(s.options||[]).length>0&&(s.qty||0)===0?s.options.map((e,m)=>({...e,is_selected:m===0?1:0})):s.options,preference:(s.preference||[]).length>0&&(s.qty||0)===0?s.preference.map(e=>({...e,is_selected:0})):s.preference}:s),{...i,breakfastCategories:i.breakfastCategories.map((s,e)=>e===c?{...s,entreeItems:d,alternativeItems:r}:s)}})},style:{marginLeft:8},disabled:t.qty>=M||O||A,children:"+"})]})]}),n.jsx(f,{mt:2,ml:1,sx:{width:"100%",minHeight:t.qty>0?"auto":0},children:t.qty>0&&n.jsxs(f,{mt:2,ml:1,sx:{width:"100%"},children:[t.options&&t.options.length>0&&n.jsx(f,{mb:1,children:t.options.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"radio",name:`breakfast-entree-option-${o.cat_id}-${t.id}`,checked:!!i.is_selected,onChange:()=>{j(h=>({...h,breakfastCategories:h.breakfastCategories.map((d,r)=>r===c?{...d,entreeItems:d.entreeItems.map(l=>l.id===t.id?{...l,options:l.options.map(p=>p.id===i.id?{...p,is_selected:1}:{...p,is_selected:0})}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))}),t.preference&&t.preference.length>0&&n.jsxs(f,{children:[n.jsx(C,{sx:{fontWeight:700,fontSize:18},children:"* Preference"}),t.preference.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"checkbox",checked:!!i.is_selected,onChange:()=>{j(h=>({...h,breakfastCategories:h.breakfastCategories.map((d,r)=>r===c?{...d,entreeItems:d.entreeItems.map(l=>l.id===t.id?{...l,preference:l.preference.map(p=>p.id===i.id?{...p,is_selected:p.is_selected?0:1}:p)}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))]})]})})]},t.id)),o.alternativeCatName&&n.jsx(C,{variant:"subtitle1",sx:{mt:3,mb:2,fontWeight:700},children:(a==null?void 0:a.langCode)==="cn"&&o.alternativeCatName_cn&&o.alternativeCatName_cn.trim()!==""?o.alternativeCatName_cn:o.alternativeCatName}),o.alternativeItems.map(t=>n.jsxs(f,{mb:1,ml:2,children:[n.jsxs(f,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[n.jsxs(f,{display:"flex",alignItems:"center",children:[t.image&&n.jsx("img",{src:t.image,alt:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name,style:{width:64,height:64,objectFit:"cover",borderRadius:8,marginRight:12}}),n.jsx(C,{children:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name})]}),n.jsxs(f,{display:"flex",alignItems:"center",children:[n.jsx("button",{onClick:()=>j(i=>({...i,breakfastCategories:i.breakfastCategories.map((h,d)=>d===c?{...h,alternativeItems:h.alternativeItems.map(r=>r.id===t.id?{...r,qty:Math.max((r.qty||0)-1,0),options:(r.options||[]).length>0&&Math.max((r.qty||0)-1,0)===0?r.options.map((l,p)=>({...l,is_selected:p===0?1:0})):r.options,preference:(r.preference||[]).length>0&&Math.max((r.qty||0)-1,0)===0?r.preference.map(l=>({...l,is_selected:0})):r.preference}:r)}:h)})),style:{marginRight:8},disabled:t.qty===0||O||A,children:"-"}),n.jsx(C,{children:t.qty||0}),n.jsx("button",{onClick:()=>{j(i=>{var l,p,q,k;const h=(((p=(l=i.breakfastCategories[c])==null?void 0:l.entreeItems)==null?void 0:p.reduce((s,e)=>s+(e.qty||0),0))||0)+(((k=(q=i.breakfastCategories[c])==null?void 0:q.alternativeItems)==null?void 0:k.reduce((s,e)=>s+(e.qty||0),0))||0);let d=[...i.breakfastCategories[c].alternativeItems],r=[...i.breakfastCategories[c].entreeItems||[]];if(h>=M){let s=!1;r=r.map(e=>{if(!s&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}),s||(d=d.map(e=>{if(!s&&e.id!==t.id&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}))}return d=d.map(s=>s.id===t.id?{...s,qty:(s.qty||0)+1,options:(s.options||[]).length>0&&(s.qty||0)===0?s.options.map((e,m)=>({...e,is_selected:m===0?1:0})):s.options,preference:(s.preference||[]).length>0&&(s.qty||0)===0?s.preference.map(e=>({...e,is_selected:0})):s.preference}:s),{...i,breakfastCategories:i.breakfastCategories.map((s,e)=>e===c?{...s,entreeItems:r,alternativeItems:d}:s)}})},style:{marginLeft:8},disabled:t.qty>=M||O||A,children:"+"})]})]}),n.jsx(f,{mt:2,ml:1,sx:{width:"100%",minHeight:t.qty>0?"auto":0},children:t.qty>0&&n.jsxs(f,{mt:2,ml:1,children:[t.options&&t.options.length>0&&n.jsx(f,{mb:1,children:t.options.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"radio",name:`breakfast-alt-option-${o.cat_id}-${t.id}`,checked:!!i.is_selected,onChange:()=>{j(h=>({...h,breakfastCategories:h.breakfastCategories.map((d,r)=>r===c?{...d,alternativeItems:d.alternativeItems.map(l=>l.id===t.id?{...l,options:l.options.map(p=>p.id===i.id?{...p,is_selected:1}:{...p,is_selected:0})}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))}),t.preference&&t.preference.length>0&&n.jsxs(f,{children:[n.jsx(C,{sx:{fontWeight:700,fontSize:18},children:"* Preference"}),t.preference.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"checkbox",checked:!!i.is_selected,onChange:()=>{j(h=>({...h,breakfastCategories:h.breakfastCategories.map((d,r)=>r===c?{...d,alternativeItems:d.alternativeItems.map(l=>l.id===t.id?{...l,preference:l.preference.map(p=>p.id===i.id?{...p,is_selected:p.is_selected?0:1}:p)}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))]})]})})]},t.id))]},o.cat_id)),Array.isArray(u.breakfastCategories)&&u.breakfastCategories.some(o=>o.entreeItems&&o.entreeItems.some(c=>c.qty>0)||o.alternativeItems&&o.alternativeItems.some(c=>c.qty>0))&&n.jsx(f,{mt:3,display:"flex",gap:2,children:n.jsxs("label",{style:{display:"flex",alignItems:"center"},children:[n.jsx("input",{type:"checkbox",checked:u.is_brk_tray_service===1,onChange:o=>{j(c=>({...c,is_brk_tray_service:o.target.checked?1:0}))}}),n.jsx("span",{style:{marginLeft:5},children:v.trayService})]})}),be&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{}),n.jsx(C,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:(a==null?void 0:a.langCode)==="cn"&&(a!=null&&a.breakfast_guideline_cn)&&(a==null?void 0:a.breakfast_guideline_cn.trim())!==""?a==null?void 0:a.breakfast_guideline_cn:a==null?void 0:a.breakfast_guideline})]}),Array.isArray(u.breakfastCategories)&&u.breakfastCategories.length===0&&n.jsx(C,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:v.breakFasrMenuWarn}),E===0&&Array.isArray(u.breakfastCategories)&&u.breakfastCategories.some(o=>o.entreeItems&&o.entreeItems.some(c=>c.qty>0)||o.alternativeItems&&o.alternativeItems.some(c=>c.qty>0))&&n.jsx(f,{mt:3,display:"flex",justifyContent:"center",children:n.jsx(U,{sx:{padding:"10px 32px",bgcolor:$.blueAccent[700],color:"#fcfcfc",border:"none",borderRadius:4,fontWeight:600,fontSize:16,cursor:"pointer",width:"auto"},disabled:O||A,onClick:()=>{J(u,R)},children:v.submit})})]})}),E===1&&n.jsx(n.Fragment,{children:n.jsxs(f,{children:[Array.isArray(u.lunchCategories)&&u.lunchCategories.map((o,c)=>n.jsxs(f,{mb:3,children:[n.jsxs(C,{variant:"h6",sx:{mb:2,fontWeight:600,backgroundColor:"#f5f5f5",px:2,py:1,borderRadius:1,textAlign:"center"},children:[(a==null?void 0:a.langCode)==="cn"&&o.cat_name_cn&&o.cat_name_cn.trim()!==""?o.cat_name_cn:o.cat_name,o.cat_name==="LUNCH ENTREE"&&` (${v.servedWithSoup})`]}),o.entreeItems.map(t=>n.jsxs(f,{mb:1,children:[n.jsxs(f,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[n.jsxs(f,{display:"flex",alignItems:"center",children:[t.image&&n.jsx("img",{src:t.image,alt:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name,style:{width:64,height:64,objectFit:"cover",borderRadius:8,marginRight:12}}),n.jsx(C,{children:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name})]}),n.jsxs(f,{display:"flex",alignItems:"center",children:[n.jsx("button",{onClick:()=>j(i=>({...i,lunchCategories:i.lunchCategories.map((h,d)=>d===c?{...h,entreeItems:h.entreeItems.map(r=>{if(r.id===t.id){const l=Math.max((r.qty||0)-1,0);return{...r,qty:l,options:(r.options||[]).length>0&&l===0?r.options.map((p,q)=>({...p,is_selected:q===0?1:0})):r.options,preference:(r.preference||[]).length>0&&l===0?r.preference.map(p=>({...p,is_selected:0})):r.preference}}return(r.qty||0)===0?{...r,options:(r.options||[]).length>0?r.options.map((l,p)=>({...l,is_selected:p===0?1:0})):r.options,preference:(r.preference||[]).length>0?r.preference.map(l=>({...l,is_selected:0})):r.preference}:r})}:h)})),style:{marginRight:8},disabled:t.qty===0||T||A,children:"-"}),n.jsx(C,{children:t.qty||0}),n.jsx("button",{onClick:()=>{j(i=>{var l,p,q,k;const h=(((p=(l=i.lunchCategories[c])==null?void 0:l.entreeItems)==null?void 0:p.reduce((s,e)=>s+(e.qty||0),0))||0)+(((k=(q=i.lunchCategories[c])==null?void 0:q.alternativeItems)==null?void 0:k.reduce((s,e)=>s+(e.qty||0),0))||0);let d=[...i.lunchCategories[c].entreeItems],r=[...i.lunchCategories[c].alternativeItems||[]];if(h>=M){let s=!1;r=r.map(e=>{if(!s&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}),s||(d=d.map(e=>{if(!s&&e.id!==t.id&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}))}return d=d.map(s=>s.id===t.id?{...s,qty:(s.qty||0)+1,options:(s.options||[]).length>0&&(s.qty||0)===0?s.options.map((e,m)=>({...e,is_selected:m===0?1:0})):s.options,preference:(s.preference||[]).length>0&&(s.qty||0)===0?s.preference.map(e=>({...e,is_selected:0})):s.preference}:s),{...i,lunchCategories:i.lunchCategories.map((s,e)=>e===c?{...s,entreeItems:d,alternativeItems:r}:s)}})},style:{marginLeft:8},disabled:t.qty>=M||T||A,children:"+"})]})]}),n.jsx(f,{mt:2,ml:1,sx:{width:"100%",minHeight:t.qty>0?"auto":0},children:t.qty>0&&n.jsxs(f,{mt:2,ml:1,sx:{width:"100%"},children:[t.options&&t.options.length>0&&n.jsx(f,{mb:1,children:t.options.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"radio",name:`lunch-entree-option-${o.cat_id}-${t.id}`,checked:!!i.is_selected,onChange:()=>{j(h=>({...h,lunchCategories:h.lunchCategories.map((d,r)=>r===c?{...d,entreeItems:d.entreeItems.map(l=>l.id===t.id?{...l,options:l.options.map(p=>p.id===i.id?{...p,is_selected:1}:{...p,is_selected:0})}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))}),t.preference&&t.preference.length>0&&n.jsxs(f,{children:[n.jsx(C,{sx:{fontWeight:700,fontSize:18},children:"* Preference"}),t.preference.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"checkbox",checked:!!i.is_selected,onChange:()=>{j(h=>({...h,lunchCategories:h.lunchCategories.map((d,r)=>r===c?{...d,entreeItems:d.entreeItems.map(l=>l.id===t.id?{...l,preference:l.preference.map(p=>p.id===i.id?{...p,is_selected:p.is_selected?0:1}:p)}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))]})]})})]},t.id)),o.alternativeCatName&&n.jsx(C,{variant:"subtitle1",sx:{mt:3,mb:2,fontWeight:700},children:(a==null?void 0:a.langCode)==="cn"&&o.alternativeCatName_cn&&o.alternativeCatName_cn.trim()!==""?o.alternativeCatName_cn:o.alternativeCatName}),o.alternativeItems.map(t=>n.jsxs(f,{mb:1,ml:2,children:[n.jsxs(f,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[n.jsxs(f,{display:"flex",alignItems:"center",children:[t.image&&n.jsx("img",{src:t.image,alt:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name,style:{width:64,height:64,objectFit:"cover",borderRadius:8,marginRight:12}}),n.jsx(C,{children:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name})]}),n.jsxs(f,{display:"flex",alignItems:"center",children:[n.jsx("button",{onClick:()=>j(i=>({...i,lunchCategories:i.lunchCategories.map((h,d)=>d===c?{...h,alternativeItems:h.alternativeItems.map(r=>r.id===t.id?{...r,qty:Math.max((r.qty||0)-1,0),options:(r.options||[]).length>0&&Math.max((r.qty||0)-1,0)===0?r.options.map((l,p)=>({...l,is_selected:p===0?1:0})):r.options,preference:(r.preference||[]).length>0&&Math.max((r.qty||0)-1,0)===0?r.preference.map(l=>({...l,is_selected:0})):r.preference}:r)}:h)})),style:{marginRight:8},disabled:t.qty===0||T||A,children:"-"}),n.jsx(C,{children:t.qty||0}),n.jsx("button",{onClick:()=>{j(i=>{var l,p,q,k;const h=(((p=(l=i.lunchCategories[c])==null?void 0:l.entreeItems)==null?void 0:p.reduce((s,e)=>s+(e.qty||0),0))||0)+(((k=(q=i.lunchCategories[c])==null?void 0:q.alternativeItems)==null?void 0:k.reduce((s,e)=>s+(e.qty||0),0))||0);let d=[...i.lunchCategories[c].alternativeItems],r=[...i.lunchCategories[c].entreeItems||[]];if(h>=M){let s=!1;r=r.map(e=>{if(!s&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}),s||(d=d.map(e=>{if(!s&&e.id!==t.id&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}))}return d=d.map(s=>s.id===t.id?{...s,qty:(s.qty||0)+1,options:(s.options||[]).length>0&&(s.qty||0)===0?s.options.map((e,m)=>({...e,is_selected:m===0?1:0})):s.options,preference:(s.preference||[]).length>0&&(s.qty||0)===0?s.preference.map(e=>({...e,is_selected:0})):s.preference}:s),{...i,lunchCategories:i.lunchCategories.map((s,e)=>e===c?{...s,entreeItems:r,alternativeItems:d}:s)}})},style:{marginLeft:8},disabled:t.qty>=M||T||A,children:"+"})]})]}),n.jsx(f,{mt:2,ml:1,sx:{width:"100%",minHeight:t.qty>0?"auto":0},children:t.qty>0&&n.jsxs(f,{mt:2,ml:1,children:[t.options&&t.options.length>0&&n.jsx(f,{mb:1,children:t.options.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"radio",name:`lunch-alt-option-${o.cat_id}-${t.id}`,checked:!!i.is_selected,onChange:()=>{j(h=>({...h,lunchCategories:h.lunchCategories.map((d,r)=>r===c?{...d,alternativeItems:d.alternativeItems.map(l=>l.id===t.id?{...l,options:l.options.map(p=>p.id===i.id?{...p,is_selected:1}:{...p,is_selected:0})}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))}),t.preference&&t.preference.length>0&&n.jsxs(f,{children:[n.jsx(C,{sx:{fontWeight:700,fontSize:18},children:"* Preference"}),t.preference.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"checkbox",checked:!!i.is_selected,onChange:()=>{j(h=>({...h,lunchCategories:h.lunchCategories.map((d,r)=>r===c?{...d,alternativeItems:d.alternativeItems.map(l=>l.id===t.id?{...l,preference:l.preference.map(p=>p.id===i.id?{...p,is_selected:p.is_selected?0:1}:p)}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))]})]})})]},t.id))]},o.cat_id)),Array.isArray(u.lunchCategories)&&u.lunchCategories.some(o=>o.entreeItems&&o.entreeItems.some(c=>c.qty>0)||o.alternativeItems&&o.alternativeItems.some(c=>c.qty>0))&&n.jsx(f,{mt:3,display:"flex",gap:3,children:n.jsxs("label",{style:{display:"flex",alignItems:"center"},children:[n.jsx("input",{type:"checkbox",checked:u.is_lunch_tray_service===1,onChange:o=>{j(c=>({...c,is_lunch_tray_service:o.target.checked?1:0}))}}),n.jsx("span",{style:{marginLeft:5},children:v.trayService})]})}),qe&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{}),n.jsx(C,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:(a==null?void 0:a.langCode)==="cn"&&(a!=null&&a.lunch_guideline_cn)&&(a==null?void 0:a.lunch_guideline_cn.trim())!==""?a==null?void 0:a.lunch_guideline_cn:a==null?void 0:a.lunch_guideline})]}),Array.isArray(u.lunchCategories)&&u.lunchCategories.length===0&&n.jsx(C,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:v.lunchMenuWarn}),E===1&&Array.isArray(u.lunchCategories)&&u.lunchCategories.some(o=>o.entreeItems&&o.entreeItems.some(c=>c.qty>0)||o.alternativeItems&&o.alternativeItems.some(c=>c.qty>0))&&n.jsx(f,{mt:3,display:"flex",justifyContent:"center",children:n.jsx(U,{sx:{padding:"10px 32px",bgcolor:$.blueAccent[700],color:"#fcfcfc",border:"none",borderRadius:4,fontWeight:600,fontSize:16,cursor:"pointer",width:"auto"},disabled:T||A,onClick:()=>{J(u,R)},children:v.submit})})]})}),E===2&&n.jsx(n.Fragment,{children:n.jsxs(f,{children:[Array.isArray(u.dinnerCategories)&&u.dinnerCategories.map((o,c)=>n.jsxs(f,{mb:3,children:[n.jsxs(C,{variant:"h6",sx:{mb:2,fontWeight:600,backgroundColor:"#f5f5f5",px:2,py:1,borderRadius:1,textAlign:"center"},children:[(a==null?void 0:a.langCode)==="cn"&&o.cat_name_cn&&o.cat_name_cn.trim()!==""?o.cat_name_cn:o.cat_name,o.cat_name==="DINNER ENTREE"&&` (${v.servedWithDessert})`]}),o.entreeItems.map(t=>n.jsxs(f,{mb:1,children:[n.jsxs(f,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[n.jsxs(f,{display:"flex",alignItems:"center",children:[t.image&&n.jsx("img",{src:t.image,alt:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name,style:{width:64,height:64,objectFit:"cover",borderRadius:8,marginRight:12}}),n.jsx(C,{children:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name})]}),n.jsxs(f,{display:"flex",alignItems:"center",children:[n.jsx("button",{onClick:()=>j(i=>({...i,dinnerCategories:i.dinnerCategories.map((h,d)=>d===c?{...h,entreeItems:h.entreeItems.map(r=>{if(r.id===t.id){const l=Math.max((r.qty||0)-1,0);return{...r,qty:l,options:(r.options||[]).length>0&&l===0?r.options.map((p,q)=>({...p,is_selected:q===0?1:0})):r.options,preference:(r.preference||[]).length>0&&l===0?r.preference.map(p=>({...p,is_selected:0})):r.preference}}return(r.qty||0)===0?{...r,options:(r.options||[]).length>0?r.options.map((l,p)=>({...l,is_selected:p===0?1:0})):r.options,preference:(r.preference||[]).length>0?r.preference.map(l=>({...l,is_selected:0})):r.preference}:r})}:h)})),style:{marginRight:8},disabled:t.qty===0||Y||A,children:"-"}),n.jsx(C,{children:t.qty||0}),n.jsx("button",{onClick:()=>{j(i=>{var l,p,q,k;const h=(((p=(l=i.dinnerCategories[c])==null?void 0:l.entreeItems)==null?void 0:p.reduce((s,e)=>s+(e.qty||0),0))||0)+(((k=(q=i.dinnerCategories[c])==null?void 0:q.alternativeItems)==null?void 0:k.reduce((s,e)=>s+(e.qty||0),0))||0);let d=[...i.dinnerCategories[c].entreeItems],r=[...i.dinnerCategories[c].alternativeItems||[]];if(h>=M){let s=!1;r=r.map(e=>{if(!s&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}),s||(d=d.map(e=>{if(!s&&e.id!==t.id&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}))}return d=d.map(s=>s.id===t.id?{...s,qty:(s.qty||0)+1,options:(s.options||[]).length>0&&(s.qty||0)===0?s.options.map((e,m)=>({...e,is_selected:m===0?1:0})):s.options,preference:(s.preference||[]).length>0&&(s.qty||0)===0?s.preference.map(e=>({...e,is_selected:0})):s.preference}:s),{...i,dinnerCategories:i.dinnerCategories.map((s,e)=>e===c?{...s,entreeItems:d,alternativeItems:r}:s)}})},style:{marginLeft:8},disabled:t.qty>=M||Y||A,children:"+"})]})]}),n.jsx(f,{mt:2,ml:1,sx:{width:"100%",minHeight:t.qty>0?"auto":0},children:t.qty>0&&n.jsxs(f,{mt:2,ml:1,children:[t.options&&t.options.length>0&&n.jsx(f,{mb:1,children:t.options.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"radio",name:`dinner-entree-option-${o.cat_id}-${t.id}`,checked:!!i.is_selected,onChange:()=>{j(h=>({...h,dinnerCategories:h.dinnerCategories.map((d,r)=>r===c?{...d,entreeItems:d.entreeItems.map(l=>l.id===t.id?{...l,options:l.options.map(p=>p.id===i.id?{...p,is_selected:1}:{...p,is_selected:0})}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))}),t.preference&&t.preference.length>0&&n.jsxs(f,{children:[n.jsx(C,{sx:{fontWeight:700,fontSize:18},children:"* Preference"}),t.preference.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"checkbox",checked:!!i.is_selected,onChange:()=>{j(h=>({...h,dinnerCategories:h.dinnerCategories.map((d,r)=>r===c?{...d,entreeItems:d.entreeItems.map(l=>l.id===t.id?{...l,preference:l.preference.map(p=>p.id===i.id?{...p,is_selected:p.is_selected?0:1}:p)}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))]})]})})]},t.id)),o.alternativeCatName&&n.jsx(C,{variant:"subtitle1",sx:{mt:3,mb:2,fontWeight:700},children:(a==null?void 0:a.langCode)==="cn"&&o.alternativeCatName_cn&&o.alternativeCatName_cn.trim()!==""?o.alternativeCatName_cn:o.alternativeCatName}),o.alternativeItems.map(t=>n.jsxs(f,{mb:1,ml:2,children:[n.jsxs(f,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[n.jsxs(f,{display:"flex",alignItems:"center",children:[t.image&&n.jsx("img",{src:t.image,alt:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name,style:{width:64,height:64,objectFit:"cover",borderRadius:8,marginRight:12}}),n.jsx(C,{children:(a==null?void 0:a.langCode)==="cn"&&t.chinese_name?t.chinese_name:t.name})]}),n.jsxs(f,{display:"flex",alignItems:"center",children:[n.jsx("button",{onClick:()=>j(i=>({...i,dinnerCategories:i.dinnerCategories.map((h,d)=>d===c?{...h,alternativeItems:h.alternativeItems.map(r=>r.id===t.id?{...r,qty:Math.max((r.qty||0)-1,0),options:(r.options||[]).length>0&&Math.max((r.qty||0)-1,0)===0?r.options.map((l,p)=>({...l,is_selected:p===0?1:0})):r.options,preference:(r.preference||[]).length>0&&Math.max((r.qty||0)-1,0)===0?r.preference.map(l=>({...l,is_selected:0})):r.preference}:r)}:h)})),style:{marginRight:8},disabled:t.qty===0||Y||A,children:"-"}),n.jsx(C,{children:t.qty||0}),n.jsx("button",{onClick:()=>{j(i=>{var l,p,q,k;const h=(((p=(l=i.dinnerCategories[c])==null?void 0:l.entreeItems)==null?void 0:p.reduce((s,e)=>s+(e.qty||0),0))||0)+(((k=(q=i.dinnerCategories[c])==null?void 0:q.alternativeItems)==null?void 0:k.reduce((s,e)=>s+(e.qty||0),0))||0);let d=[...i.dinnerCategories[c].alternativeItems],r=[...i.dinnerCategories[c].entreeItems||[]];if(h>=M){let s=!1;r=r.map(e=>{if(!s&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}),s||(d=d.map(e=>{if(!s&&e.id!==t.id&&e.qty>0){s=!0;const m=e.qty-1;return{...e,qty:m,options:(e.options||[]).length>0&&e.qty>0&&m===0?e.options.map((g,_)=>({...g,is_selected:_===0?1:0})):e.options,preference:(e.preference||[]).length>0&&e.qty>0&&m===0?e.preference.map(g=>({...g,is_selected:0})):e.preference}}return e}))}return d=d.map(s=>s.id===t.id?{...s,qty:(s.qty||0)+1,options:(s.options||[]).length>0&&(s.qty||0)===0?s.options.map((e,m)=>({...e,is_selected:m===0?1:0})):s.options,preference:(s.preference||[]).length>0&&(s.qty||0)===0?s.preference.map(e=>({...e,is_selected:0})):s.preference}:s),{...i,dinnerCategories:i.dinnerCategories.map((s,e)=>e===c?{...s,entreeItems:r,alternativeItems:d}:s)}})},style:{marginLeft:8},disabled:t.qty>=M||Y||A,children:"+"})]})]}),n.jsx(f,{mt:2,ml:1,sx:{width:"100%",minHeight:t.qty>0?"auto":0},children:t.qty>0&&n.jsxs(f,{mt:2,ml:3,children:[t.options&&t.options.length>0&&n.jsx(f,{mb:1,children:t.options.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"radio",name:`dinner-alt-option-${o.cat_id}-${t.id}`,checked:!!i.is_selected,onChange:()=>{j(h=>({...h,dinnerCategories:h.dinnerCategories.map((d,r)=>r===c?{...d,alternativeItems:d.alternativeItems.map(l=>l.id===t.id?{...l,options:l.options.map(p=>p.id===i.id?{...p,is_selected:1}:{...p,is_selected:0})}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))}),t.preference&&t.preference.length>0&&n.jsxs(f,{children:[n.jsx(C,{sx:{fontWeight:700,fontSize:18},children:"* Preference"}),t.preference.map(i=>n.jsxs("label",{style:{marginRight:12},children:[n.jsx("input",{type:"checkbox",checked:!!i.is_selected,onChange:()=>{j(h=>({...h,dinnerCategories:h.dinnerCategories.map((d,r)=>r===c?{...d,alternativeItems:d.alternativeItems.map(l=>l.id===t.id?{...l,preference:l.preference.map(p=>p.id===i.id?{...p,is_selected:p.is_selected?0:1}:p)}:l)}:d)}))}}),n.jsx("span",{style:{marginLeft:5},children:i.name})]},i.id))]})]})})]},t.id))]},o.cat_id)),Array.isArray(u.dinnerCategories)&&u.dinnerCategories.some(o=>o.entreeItems&&o.entreeItems.some(c=>c.qty>0)||o.alternativeItems&&o.alternativeItems.some(c=>c.qty>0))&&n.jsx(f,{mt:3,display:"flex",gap:3,children:n.jsxs("label",{style:{display:"flex",alignItems:"center"},children:[n.jsx("input",{type:"checkbox",checked:u.is_dinner_tray_service===1,onChange:o=>{j(c=>({...c,is_dinner_tray_service:o.target.checked?1:0}))}}),n.jsx("span",{style:{marginLeft:5},children:v.trayService})]})}),Ie&&n.jsxs(n.Fragment,{children:[n.jsx("hr",{}),n.jsx(C,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:(a==null?void 0:a.langCode)==="cn"&&(a!=null&&a.dinner_guideline_cn)&&(a==null?void 0:a.dinner_guideline_cn.trim())!==""?a==null?void 0:a.dinner_guideline_cn:a==null?void 0:a.dinner_guideline})]}),Array.isArray(u.dinnerCategories)&&u.dinnerCategories.length===0&&n.jsx(C,{variant:"subtitle1",sx:{fontWeight:600,mb:1},children:v.dinnerMenuWarn}),E===2&&Array.isArray(u.dinnerCategories)&&u.dinnerCategories.some(o=>o.entreeItems&&o.entreeItems.some(c=>c.qty>0)||o.alternativeItems&&o.alternativeItems.some(c=>c.qty>0))&&n.jsx(f,{mt:3,display:"flex",justifyContent:"center",children:n.jsx(U,{sx:{padding:"10px 32px",bgcolor:$.blueAccent[700],color:"#fcfcfc",border:"none",borderRadius:4,fontWeight:600,fontSize:16,cursor:"pointer",width:"auto"},disabled:Y||A,onClick:()=>{J(u,R)},children:v.submit})})]})})]})]})]})]})};export{mn as default};
