import{a as v,u as A,r as c,j as e,B as x,T as $,C as W}from"./index-BwmcJqXe.js";import{H as E,O as G}from"./Header-DHng6mDv.js";import{t as L}from"./js.cookie-D6u0Ev2v.js";import{d as w,L as B,A as O,D as H}from"./AdapterDayjs-CPGd2Hmh.js";import{l as s}from"./lodash-DlnEnR7c.js";import{i as P,c as m,g as Y,f as q}from"./dataProcessors-91iKuH_J.js";import{T as I,P as z}from"./TextField-Chl8BVYM.js";import{T as F,a as N,b as U,c as d,d as J}from"./TableRow-DY1rqCVa.js";import{T as n}from"./TableCell-D-qbetRu.js";import{M as g}from"./Tooltip-B9Bn5RD9.js";import"./api-BgMF1pqD.js";import"./IconButton-BfIVNQZi.js";import"./InputAdornment-CHYGVqDs.js";const ce=()=>{var b,u,f,j,_,C;const y=v(),D=A(),a=L(D.palette.mode),[p,k]=c.useState(w()),[T,h]=c.useState(!1),[r,R]=c.useState({}),[K,S]=c.useState(!0);c.useEffect(()=>{(async()=>{try{h(!0);const o=await G.getReportList(p.format("YYYY-MM-DD"));R(o)}catch(o){console.error("Error fetching menu list:",o)}finally{h(!1)}})()},[p]);const M=t=>{t&&!t.isSame(p,"day")&&k(t),S(!1)};return e.jsxs(x,{m:"20px",children:[e.jsx(E,{title:"Report",profileScreen:!0}),e.jsxs(x,{mt:"40px",height:"75vh",flex:1,sx:{"& .MuiDataGrid-root":{border:"none"},"& .MuiDataGrid-cell":{border:"none"},"& .name-column--cell":{color:a.greenAccent[300]},"& .MuiDataGrid-columnHeaders":{backgroundColor:a.blueAccent[700],borderBottom:"none"},"& .MuiDataGrid-virtualScroller":{backgroundColor:a.primary[400]},"& .MuiDataGrid-footerContainer":{borderTop:"none",backgroundColor:a.blueAccent[700]},"& .MuiCheckbox-root":{color:`${a.greenAccent[200]} !important`},"& .MuiDataGrid-iconSeparator":{color:a.primary[100]}},children:[e.jsxs(x,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(B,{dateAdapter:O,children:e.jsx(H,{label:"Date",value:p,onChange:M,renderInput:t=>e.jsx(I,{...t,fullWidth:!0,variant:"filled",sx:{gridColumn:"span 1"}})})}),e.jsx($,{variant:"subtitle1",sx:{fontWeight:600,cursor:"pointer"},onClick:()=>y("/charges"),onMouseOver:t=>t.target.style.cursor="pointer",children:"Charges"})]}),T?e.jsx(W,{}):e.jsx(F,{component:z,children:e.jsxs(N,{sx:{border:"1px solid rgba(224, 224, 224, 1)",borderCollapse:"collapse"},children:[e.jsxs(U,{children:[e.jsxs(d,{sx:{backgroundColor:a.blueAccent[700]},children:[e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},rowSpan:2,children:"Room No"}),e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},colSpan:((b=r==null?void 0:r.breakfast_item_list)==null?void 0:b.length)||0,children:"Breakfast"}),e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},colSpan:((u=r==null?void 0:r.lunch_item_list)==null?void 0:u.length)||0,children:"Lunch"}),e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},colSpan:((f=r==null?void 0:r.dinner_item_list)==null?void 0:f.length)||0,children:"Dinner"})]}),e.jsxs(d,{sx:{backgroundColor:a.blueAccent[700]},children:[(j=r==null?void 0:r.breakfast_item_list)==null?void 0:j.map((t,o)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:e.jsx(g,{title:t.real_item_name,arrow:!0,children:e.jsx("span",{children:t.item_name})})},`breakfast-${o}`)),(_=r==null?void 0:r.lunch_item_list)==null?void 0:_.map((t,o)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:e.jsx(g,{title:t.real_item_name,arrow:!0,children:e.jsx("span",{children:t.item_name})})},`lunch-${o}`)),(C=r==null?void 0:r.dinner_item_list)==null?void 0:C.map((t,o)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:e.jsx(g,{title:t.real_item_name,arrow:!0,children:e.jsx("span",{children:t.item_name})})},`dinner-${o}`))]})]}),e.jsxs(J,{children:[P(r)?e.jsx(d,{children:e.jsx(n,{align:"center",colSpan:4,sx:{textAlign:"center",fontWeight:600,fontSize:"1.1rem"},children:"No Report Found"})}):e.jsxs(d,{sx:{backgroundColor:a.blueAccent[800]},children:[e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)"},children:"Total"}),s.map(s.get(r,"breakfast_item_list",[]),(t,o)=>e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)",color:"red"},children:m(s.get(r,"report_breakfast_list",[]),o)},`btot-${o}`)),s.map(s.get(r,"lunch_item_list",[]),(t,o)=>e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)",color:"red"},children:m(s.get(r,"report_lunch_list",[]),o)},`ltot-${o}`)),s.map(s.get(r,"dinner_item_list",[]),(t,o)=>e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)",color:"red"},children:m(s.get(r,"report_dinner_list",[]),o)},`dtot-${o}`))]}),s.map(Y(r),t=>{const o=q(r,t);return e.jsxs(d,{children:[e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:t}),s.map(o.breakfast.quantity,(i,l)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:i},`b-${l}`)),s.map(o.lunch.quantity,(i,l)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:i},`l-${l}`)),s.map(o.dinner.quantity,(i,l)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:i},`d-${l}`))]},t)})]})]})})]})]})};export{ce as default};
