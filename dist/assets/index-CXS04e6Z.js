import{u as I,r as t,a as A,j as o,B as a,T}from"./index-BlhyXN4h.js";import{t as N,u as R,y as f,L as W,C as b}from"./js.cookie-D4_0Lw4j.js";import{l as B}from"./logo-06Lthgp1.js";import{u as D}from"./useCommon-DZOERRCT.js";import{s as E}from"./validation-HK-r12BT.js";import{T as O}from"./TextField-BP0bZSUc.js";import{I as z}from"./IconButton-BWxRuJ-2.js";import{A as j}from"./ArrowForwardIosOutlined-Ch7ZJOXv.js";import{L as F}from"./LogoutOutlined-D7tdLiF5.js";import"./lodash-Dn5aD5Mr.js";const K=()=>{const w=I(),e=N(w.palette.mode),v=R("(min-width: 724px)"),[n,C]=t.useState({roomNo:""}),[d]=t.useState({roomNo:""}),[s,x]=t.useState(!1),[g,L]=t.useState(!1),r=A(),[i]=D("userData",null);t.useEffect(()=>{if(g)return;localStorage.getItem("authToken")||r("/",{replace:!0})},[r,g]);const S=t.useCallback(l=>{const{name:m,value:p}=l.target,c=E(p);C(u=>({...u,[m]:c}))},[]),h=t.useCallback(async l=>{var u;l.preventDefault();const m=(u=n==null?void 0:n.roomNo)==null?void 0:u.toString(),c=((i==null?void 0:i.rooms)||[]).find(y=>y.name.toLowerCase()===m.toLowerCase());c?r("/order",{state:{roomNo:c.name}}):f.error("Room number not found!")},[n,i,r]),k=t.useCallback(()=>{f.success("Logged out!"),x(!0),L(!0),setTimeout(()=>{x(!1),localStorage.removeItem("authToken"),localStorage.removeItem("userData"),r("/",{replace:!0})},1e3)},[r]);return o.jsxs(a,{display:"flex",height:"100vh",width:"100%",sx:{overflowX:"hidden",overflowY:"auto"},children:[o.jsx(W,{}),o.jsx(a,{flex:7,sx:{backgroundColor:e.blueAccent[700],height:"100vh",width:"100%",overflowX:"hidden"}}),o.jsx(a,{flex:5,display:"flex",alignItems:"center",justifyContent:"center",sx:{backgroundColor:"white",height:"100vh",width:"100%"},children:o.jsxs(a,{component:"form",onSubmit:h,sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"100%",maxWidth:"400px",padding:"20px",margin:"0 auto"},children:[o.jsx("img",{src:B,alt:"Logo",style:{width:80,marginBottom:16}}),o.jsxs(T,{variant:"h6",gutterBottom:!0,sx:{textAlign:"center",textTransform:"uppercase",fontWeight:700},children:["Welcome to our ",o.jsx("br",{})," Exceptional ",o.jsx("br",{}),"Senior Living"]}),o.jsx(O,{label:"Room No",name:"roomNo",type:"text",value:n.roomNo,onChange:S,error:!!d.roomNo,helperText:d.roomNo,fullWidth:!0,margin:"normal",InputProps:{endAdornment:o.jsx(z,{onClick:h,edge:"end","aria-label":"submit room number",sx:{color:e.blueAccent[700],marginRight:2},children:o.jsx(j,{})}),sx:{borderRadius:"30px",background:e.blueAccent[50],paddingRight:0}}}),o.jsxs(a,{display:"flex",flexDirection:"column",alignItems:"center",gap:1,width:"100%",children:[o.jsx(b,{onClick:()=>r("/report"),endIcon:o.jsx(j,{}),sx:{bgcolor:e.blueAccent[50],color:e.blueAccent[700],"&:hover":{bgcolor:e.blueAccent[100],color:e.blueAccent[800]},padding:"10px 32px",boxShadow:"none",border:"none",borderRadius:4,fontWeight:600,fontSize:16,cursor:"pointer",width:"240px",maxWidth:"100%"},children:"View Report"}),o.jsx(b,{onClick:k,startIcon:o.jsx(F,{}),disabled:s,sx:{bgcolor:e.blueAccent[700],color:"#fcfcfc",fontSize:v?"14px":"10px",fontWeight:"bold",padding:"10px 32px",borderRadius:4,textDecoration:"none",transition:".3s ease",opacity:s?.7:1,pointerEvents:s?"none":"auto",cursor:s?"not-allowed":"pointer",width:"240px",maxWidth:"100%","&:hover":{bgcolor:e.blueAccent[800]}},children:s?"Loading...":"Log Out"})]})]})})]})};export{K as default};
