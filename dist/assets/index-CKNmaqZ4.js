import{a as T,u as A,r as c,j as e,B as p,C as M}from"./index-DAVqn9K3.js";import{H as $,O as v}from"./Header-CtNRcJLT.js";import{t as E}from"./js.cookie-D4dm7CFT.js";import{d as G,L,A as W,D as w}from"./AdapterDayjs-CiH4_Teq.js";import{l as s}from"./lodash-D4TlxJaD.js";import{i as B,g as H,f as O}from"./dataProcessors-CpRLDvos.js";import{T as P,P as Y}from"./TextField-B-O1HeAh.js";import{T as q,a as I,b as z,c as d,d as F}from"./TableRow-CT6yEtHz.js";import{T as n}from"./TableCell-eB_9gXrw.js";import{M as m}from"./Tooltip-DYz6il-K.js";import"./api-DMfnBIrs.js";import"./IconButton-CtohOmwj.js";import"./InputAdornment-S91pia7w.js";const ae=()=>{var g,h,u,j,f,_;T();const C=A(),a=E(C.palette.mode),[x,D]=c.useState(G()),[y,b]=c.useState(!1),[t,k]=c.useState({}),[N,S]=c.useState(!0);c.useEffect(()=>{(async()=>{try{b(!0);const o=await v.getReportList(x.format("YYYY-MM-DD"));k(o)}catch(o){console.error("Error fetching menu list:",o)}finally{b(!1)}})()},[x]);const R=r=>{r&&!r.isSame(x,"day")&&D(r),S(!1)};return e.jsxs(p,{m:"20px",children:[e.jsx($,{title:"Report",profileScreen:!0}),e.jsxs(p,{mt:"40px",height:"75vh",flex:1,sx:{"& .MuiDataGrid-root":{border:"none"},"& .MuiDataGrid-cell":{border:"none"},"& .name-column--cell":{color:a.greenAccent[300]},"& .MuiDataGrid-columnHeaders":{backgroundColor:a.blueAccent[700],borderBottom:"none"},"& .MuiDataGrid-virtualScroller":{backgroundColor:a.primary[400]},"& .MuiDataGrid-footerContainer":{borderTop:"none",backgroundColor:a.blueAccent[700]},"& .MuiCheckbox-root":{color:`${a.greenAccent[200]} !important`},"& .MuiDataGrid-iconSeparator":{color:a.primary[100]}},children:[e.jsx(p,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:e.jsx(L,{dateAdapter:W,children:e.jsx(w,{label:"Date",value:x,onChange:R,renderInput:r=>e.jsx(P,{...r,fullWidth:!0,variant:"filled",sx:{gridColumn:"span 1"}})})})}),y?e.jsx(M,{}):e.jsx(q,{component:Y,children:e.jsxs(I,{sx:{border:"1px solid rgba(224, 224, 224, 1)",borderCollapse:"collapse"},children:[e.jsxs(z,{children:[e.jsxs(d,{sx:{backgroundColor:a.blueAccent[700]},children:[e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},rowSpan:2,children:"Room No"}),e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},colSpan:((g=t==null?void 0:t.breakfast_item_list)==null?void 0:g.length)||0,children:"Breakfast"}),e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},colSpan:((h=t==null?void 0:t.lunch_item_list)==null?void 0:h.length)||0,children:"Lunch"}),e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},colSpan:((u=t==null?void 0:t.dinner_item_list)==null?void 0:u.length)||0,children:"Dinner"})]}),e.jsxs(d,{sx:{backgroundColor:a.blueAccent[700]},children:[(j=t==null?void 0:t.breakfast_item_list)==null?void 0:j.map((r,o)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:e.jsx(m,{title:r.real_item_name,arrow:!0,children:e.jsx("span",{children:r.item_name})})},`breakfast-${o}`)),(f=t==null?void 0:t.lunch_item_list)==null?void 0:f.map((r,o)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:e.jsx(m,{title:r.real_item_name,arrow:!0,children:e.jsx("span",{children:r.item_name})})},`lunch-${o}`)),(_=t==null?void 0:t.dinner_item_list)==null?void 0:_.map((r,o)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:e.jsx(m,{title:r.real_item_name,arrow:!0,children:e.jsx("span",{children:r.item_name})})},`dinner-${o}`))]})]}),e.jsxs(F,{children:[B(t)?e.jsx(d,{children:e.jsx(n,{align:"center",colSpan:4,sx:{textAlign:"center",fontWeight:600,fontSize:"1.1rem"},children:"No Report Found"})}):e.jsxs(d,{sx:{backgroundColor:a.blueAccent[800]},children:[e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)"},children:"Total"}),s.map(s.get(t,"breakfast_item_list",[]),(r,o)=>e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)",color:"red"},children:r.total_count},`btot-${o}`)),s.map(s.get(t,"lunch_item_list",[]),(r,o)=>e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)",color:"red"},children:r.total_count},`ltot-${o}`)),s.map(s.get(t,"dinner_item_list",[]),(r,o)=>e.jsx(n,{align:"center",sx:{fontWeight:700,border:"1px solid rgba(224, 224, 224, 1)",color:"red"},children:r.total_count},`dtot-${o}`))]}),s.map(H(t),r=>{const o=O(t,r);return e.jsxs(d,{children:[e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:r}),s.map(o.breakfast.quantity,(i,l)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:i},`b-${l}`)),s.map(o.lunch.quantity,(i,l)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:i},`l-${l}`)),s.map(o.dinner.quantity,(i,l)=>e.jsx(n,{align:"center",sx:{border:"1px solid rgba(224, 224, 224, 1)"},children:i},`d-${l}`))]},r)})]})]})})]})]})};export{ae as default};
