import{c as g,j as e,u as q,r as n,B as l,G as J}from"./index-BHNVHtdT.js";import{t as K,C as r}from"./js.cookie-dTu_y0vz.js";import{D as M,a as O,b as P}from"./InputAdornment-3yUghm8y.js";import{D as W}from"./DialogTitle-CngpH2ex.js";import{M as p}from"./Tooltip-BpFh1TiE.js";import{I as m}from"./IconButton-BDVsVlra.js";import{T as N}from"./TextField-rLvJhvSW.js";const Q=g(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"CloseOutlined"),U=g(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14m.5-7H9v2H7v1h2v2h1v-2h2V9h-2z"}),"ZoomInOutlined"),X=g(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOutOutlined"),le=({open:k,onClose:b,onCloseComplete:j,pdfUrl:d,onPrint:C,onMail:f,onFollowUp:S,showPrintButton:A=!0,showMailButton:R=!1,showFollowUpButton:E=!1,title:Z="PDF Preview"})=>{const F=q(),o=K(F.palette.mode),[s,i]=n.useState(1),[z,a]=n.useState(!0),[u,c]=n.useState(!1),[L,v]=n.useState(!1),[x,w]=n.useState(""),[y,I]=n.useState(!1),T=()=>i(t=>Math.min(t+.2,3)),B=()=>i(t=>Math.max(t-.2,.5)),D=()=>{i(1),a(!0),c(!1),b()},$=()=>{i(1),a(!0),c(!1),j?j():b()},H=()=>{C?C():window.open(d,"_blank")},G=()=>{v(!0)},h=()=>{v(!1),w("")},V=async()=>{if(x){I(!0);try{f&&await f(x),h()}catch(t){console.error("Error sending mail:",t)}finally{I(!1)}}},_={position:"absolute",top:0,left:0,transform:`scale(${s})`,transformOrigin:"top left",border:"none",width:`${100/s}%`,height:`${100/s}%`};return e.jsxs(e.Fragment,{children:[e.jsxs(M,{open:k,onClose:D,maxWidth:"lg",fullWidth:!0,sx:{zIndex:2e3,bgcolor:"#fafafa"},disableScrollLock:!0,children:[e.jsxs(l,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,pt:1,pb:.5,bgcolor:o.primary[500],color:"#fff",userSelect:"none"},children:[e.jsx(W,{sx:{color:"#fff",m:0,p:0,fontWeight:"bold"},children:Z}),e.jsxs(l,{children:[e.jsx(p,{title:"Zoom Out",children:e.jsx(m,{size:"small",onClick:B,disabled:s<=.5,sx:{color:"#fff"},children:e.jsx(X,{})})}),e.jsx(p,{title:"Zoom In",children:e.jsx(m,{size:"small",onClick:T,disabled:s>=3,sx:{color:"#fff"},children:e.jsx(U,{})})}),e.jsx(p,{title:"Close",children:e.jsx(m,{size:"small",onClick:D,sx:{color:"#fff"},children:e.jsx(Q,{})})})]})]}),e.jsxs(O,{dividers:!0,sx:{position:"relative",height:"80vh",p:0,bgcolor:"#fff",overflow:"hidden",boxShadow:3,borderRadius:1},children:[z&&e.jsxs(l,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:10,bgcolor:"rgba(255,255,255,0.8)",borderRadius:2,p:3,display:"flex",alignItems:"center",flexDirection:"column"},children:[e.jsx(J,{}),e.jsx(l,{mt:1,color:"text.secondary",children:"Loading PDF..."})]}),u&&e.jsx(l,{sx:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center",color:"error.main",fontWeight:"bold",fontSize:"1.2rem",p:2},children:"Failed to load PDF. Please try again later."}),!u&&d&&e.jsx("iframe",{onLoad:()=>{a(!1),c(!1)},onError:()=>{a(!1),c(!0)},src:`https://docs.google.com/gview?url=${encodeURIComponent(d)}&embedded=true`,title:"PDF Preview",style:_,width:"100%",height:"100%"})]}),!z&&!u&&e.jsxs(P,{sx:{px:3,py:1.5,bgcolor:o.primary[500],justifyContent:"flex-end",gap:1},children:[E&&S&&e.jsx(r,{sx:{padding:"10px 32px",bgcolor:o.blueAccent[50],color:o.blueAccent[700],border:"none",borderRadius:4,fontWeight:600,fontSize:16,cursor:"pointer",width:"auto"},onClick:S,children:"Follow Up"}),R&&f&&e.jsx(r,{sx:{padding:"10px 32px",bgcolor:o.blueAccent[50],color:o.blueAccent[700],border:"none",borderRadius:4,fontWeight:600,fontSize:16,cursor:"pointer",width:"auto"},onClick:G,children:"Mail"}),A&&e.jsx(r,{sx:{padding:"10px 32px",bgcolor:o.blueAccent[50],color:o.blueAccent[700],border:"none",borderRadius:4,fontWeight:600,fontSize:16,cursor:"pointer",width:"auto"},onClick:H,children:"Print"}),e.jsx(r,{sx:{padding:"10px 32px",bgcolor:o.blueAccent[700],color:"#fcfcfc",border:"none",borderRadius:4,fontWeight:600,fontSize:16,cursor:"pointer",width:"auto"},onClick:$,children:"Close"})]})]}),e.jsxs(M,{open:L,onClose:h,maxWidth:"sm",fullWidth:!0,sx:{zIndex:2100},children:[e.jsx(W,{children:"Send Email"}),e.jsx(O,{children:e.jsx(N,{autoFocus:!0,margin:"dense",label:"Enter Email Id",type:"email",fullWidth:!0,value:x,onChange:t=>w(t.target.value)})}),e.jsxs(P,{children:[e.jsx(r,{sx:{padding:"10px 32px",bgcolor:o.blueAccent[50],color:o.blueAccent[700],border:"none",borderRadius:4,fontWeight:600,fontSize:16,cursor:"pointer",width:"auto"},onClick:V,disabled:y,children:y?"Sending...":"Send"}),e.jsx(r,{sx:{padding:"10px 32px",bgcolor:o.blueAccent[700],color:"#fcfcfc",border:"none",borderRadius:4,fontWeight:600,fontSize:16,cursor:"pointer",width:"auto"},onClick:h,children:"Cancel"})]})]})]})};export{le as P};
