import {
    Box, useTheme, Table, TableHead, TableBody, TableRow, TableCell,
    TableContainer, Paper, Typography
} from "@mui/material";
import { DatePicker, LocalizationProvider } from "@mui/x-date-pickers";
import { Header } from "../../components";
import { tokens } from "../../theme";
import { LocalPizzaOutlined } from "@mui/icons-material";
import { useEffect, useState, useCallback } from "react";
import dayjs from "dayjs";
import { AdapterDayjs } from "@mui/x-date-pickers/AdapterDayjs";
import CustomLoadingOverlay from "../../components/CustomLoadingOverlay";

// ...reportData definition remains unchanged...
const dummyData = {
    "result": {
        "rows": [
            {
                "room_id": "101",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "102",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "104",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "106",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC1",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC2",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC3",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC4",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC5",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC6",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC7",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC8",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC9",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC10",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC11",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "MC12",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "214",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "216",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "217",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "218",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "219",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "220",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "223",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "224",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "228",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "229",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "230",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "231",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "233",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "235",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "236",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "238",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "239",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "240A",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "311",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "313",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "314",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "316",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "318",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "319",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "321",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "322",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "323",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "328",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "329",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "332",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "333",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "335",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "339",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "411",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "412",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "413",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "414",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "415",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "416A",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "417",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "418",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "419",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "421",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "422",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "423",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "424A",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "425",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "427",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "428",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "430",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "431",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "432",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "433",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "434",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            },
            {
                "room_id": "435",
                "BA": 0,
                "B1": 0,
                "B2": 0,
                "B3": 0,
                "B4": 0,
                "LS": 0,
                "LA": 0,
                "L1": 0,
                "L2": 0,
                "L3": 0,
                "L4": 0,
                "DA": 0,
                "DB": 0,
                "D1": 0,
                "D2": 0,
                "D3": 0,
                "D4": 0
            }
        ]
    },
    "columns": [
        [
            {
                "title": "Room No",
                "field": "room_id",
                "rowspan": 3
            },
            {
                "title": "Breakfast",
                "colspan": 5
            },
            {
                "title": "Lunch",
                "colspan": 6
            },
            {
                "title": "Dinner",
                "colspan": 6
            }
        ],
        {
            "BA": {
                "title": 0
            },
            "B1": {
                "title": 0
            },
            "B2": {
                "title": 0
            },
            "B3": {
                "title": 0
            },
            "B4": {
                "title": 0
            },
            "LS": {
                "title": 0
            },
            "LA": {
                "title": 0
            },
            "L1": {
                "title": 0
            },
            "L2": {
                "title": 0
            },
            "L3": {
                "title": 0
            },
            "L4": {
                "title": 0
            },
            "DA": {
                "title": 0
            },
            "DB": {
                "title": 0
            },
            "D1": {
                "title": 0
            },
            "D2": {
                "title": 0
            },
            "D3": {
                "title": 0
            },
            "D4": {
                "title": 0
            }
        },
        [
            {
                "title": "BA",
                "tooltip": "Egg, Mushroom, Turkey Bacon, Whole Wheat and Oatmeal & Fruits",
                "field": "BA"
            },
            {
                "title": "B1",
                "tooltip": "Choice of Egg",
                "field": "B1"
            },
            {
                "title": "B2",
                "tooltip": "Toast",
                "field": "B2"
            },
            {
                "title": "B3",
                "tooltip": "Oatmeal",
                "field": "B3"
            },
            {
                "title": "B4",
                "tooltip": "Fruit",
                "field": "B4"
            },
            {
                "title": "LS",
                "tooltip": "Soup of the Day",
                "field": "LS"
            },
            {
                "title": "LA",
                "tooltip": "Minced Beef with Tofu and Tomato Rice Noodle in Soup with Steamed Bok Choy",
                "field": "LA"
            },
            {
                "title": "L1",
                "tooltip": "Egg Salad Sandwich",
                "field": "L1"
            },
            {
                "title": "L2",
                "tooltip": "Ham and Cheese Sandwich",
                "field": "L2"
            },
            {
                "title": "L3",
                "tooltip": "Turkey Sandwich",
                "field": "L3"
            },
            {
                "title": "L4",
                "tooltip": "Cheese Omelette",
                "field": "L4"
            },
            {
                "title": "DA",
                "tooltip": "Bead Curd Vegetable in Fish Soup served with Rice",
                "field": "DA"
            },
            {
                "title": "DB",
                "tooltip": "Macanese (Portuguese) Chicken Curry with Rice (Peanut, Coconut, Bell Pepper)",
                "field": "DB"
            },
            {
                "title": "D1",
                "tooltip": "Pan Seared Chicken Breast",
                "field": "D1"
            },
            {
                "title": "D2",
                "tooltip": "Pan Seared Fish",
                "field": "D2"
            },
            {
                "title": "D3",
                "tooltip": "Vegetarian Plate",
                "field": "D3"
            },
            {
                "title": "D4",
                "tooltip": "Sandwich of the Day",
                "field": "D4"
            }
        ]
    ],
    "total": {
        "BA": 0,
        "B1": 0,
        "B2": 0,
        "B3": 0,
        "B4": 0,
        "LS": 0,
        "LA": 0,
        "L1": 0,
        "L2": 0,
        "L3": 0,
        "L4": 0,
        "DA": 0,
        "DB": 0,
        "D1": 0,
        "D2": 0,
        "D3": 0,
        "D4": 0
    }
}

const Report = () => {
    const theme = useTheme();
    const colors = tokens(theme.palette.mode);
    const [date, setDate] = useState(dayjs());
    const [loading, setLoading] = useState(false);
    const [data, setData] = useState({});
    const [openCalendar, setOpenCalendar] = useState(true); // Open on mount

    useEffect(() => {
        const fetchReports = async () => {
            try {
                setLoading(true);
                // const response = await ReportServices.getReportList(date.format("YYYY-MM-DD"));
                setData(dummyData);
            } catch (error) {
                console.error("Error fetching menu list:", error);
            } finally {
                setLoading(false);
            }
        };
        fetchReports();
    }, [date]);

    // Helper to safely get columns for mapping
    const getColumns = useCallback(
        (idx) =>
            Array.isArray(data?.columns) && Array.isArray(data.columns[idx])
                ? data.columns[idx]
                : [],
        [data]
    );

    // Handle date change and close calendar after selection

    const handleDateChange = (newValue) => {
        if (newValue && !newValue.isSame(date, 'day')) {
            setDate(newValue);
        }
        setOpenCalendar(false);
    };

    return (
        <Box m="20px">
            <Header
                title="Order Details"
                icon={<LocalPizzaOutlined />}
            />
            <Box
                mt="40px"
                height="75vh"
                flex={1}
                sx={{
                    "& .MuiDataGrid-root": { border: "none" },
                    "& .MuiDataGrid-cell": { border: "none" },
                    "& .name-column--cell": { color: colors.greenAccent[300] },
                    "& .MuiDataGrid-columnHeaders": {
                        backgroundColor: colors.blueAccent[700],
                        borderBottom: "none",
                    },
                    "& .MuiDataGrid-virtualScroller": {
                        backgroundColor: colors.primary[400],
                    },
                    "& .MuiDataGrid-footerContainer": {
                        borderTop: "none",
                        backgroundColor: colors.blueAccent[700],
                    },
                    "& .MuiCheckbox-root": {
                        color: `${colors.greenAccent[200]} !important`,
                    },
                    "& .MuiDataGrid-iconSeparator": {
                        color: colors.primary[100],
                    },
                }}
            >
                {/* Calendar opens automatically on mount */}
                <Box display="flex" alignItems="center" justifyContent="space-between" mb={2}>
                    <LocalizationProvider dateAdapter={AdapterDayjs}>
                        <DatePicker
                            label="Date"
                            value={date}
                            onChange={(newValue) => setDate(newValue)}
                            renderInput={(params) => (
                                <TextField
                                    {...params}
                                    fullWidth
                                    variant="filled"
                                    sx={{ gridColumn: "span 1" }}
                                />
                            )}
                        />
                    </LocalizationProvider>
                    <Typography variant="subtitle1" sx={{ fontWeight: 600 }}>
                        Charges
                    </Typography>
                </Box>
                {/* Table Section */}
                {loading ? (
                    <CustomLoadingOverlay />
                ) : data?.result?.rows?.length > 0 ? (
                    <TableContainer component={Paper}>
                        <Table sx={{ border: '1px solid rgba(224, 224, 224, 1)', borderCollapse: 'collapse' }}>
                            <TableHead>
                                <TableRow sx={{ backgroundColor: colors.blueAccent[700] }}>
                                    {getColumns(0).map((item, index) => (
                                        <TableCell
                                            key={index}
                                            align="center"
                                            sx={{ border: '1px solid rgba(224, 224, 224, 1)' }}
                                            {...(index === 0
                                                ? { rowSpan: item?.rowspan }
                                                : { colSpan: item?.colspan })}
                                        >
                                            {item?.title}
                                        </TableCell>
                                    ))}
                                </TableRow>
                                <TableRow sx={{ backgroundColor: colors.blueAccent[700] }}>
                                    {getColumns(data?.columns?.length - 2).map((item, key) => (
                                        <TableCell
                                            key={key}
                                            align="center"
                                            sx={{ border: '1px solid rgba(224, 224, 224, 1)' }}
                                        >
                                            {item.title}
                                        </TableCell>
                                    ))}
                                </TableRow>
                                <TableRow sx={{ backgroundColor: colors.blueAccent[700] }}>
                                    {getColumns(data?.columns?.length - 1).map((item, key) => (
                                        <TableCell
                                            key={key}
                                            align="center"
                                            sx={{ border: '1px solid rgba(224, 224, 224, 1)' }}
                                        >
                                            {item.field}
                                        </TableCell>
                                    ))}
                                </TableRow>
                            </TableHead>
                            <TableBody>
                                {data?.result?.rows.map((room, index) => (
                                    <TableRow key={index}>
                                        <TableCell
                                            align="center"
                                            sx={{ border: '1px solid rgba(224, 224, 224, 1)' }}
                                        >
                                            {room.room_id}
                                        </TableCell>
                                        {Object.keys(room).filter(key => key !== 'room_id').map((key, subIndex) => (
                                            <TableCell
                                                key={subIndex}
                                                align="center"
                                                sx={{ border: '1px solid rgba(224, 224, 224, 1)' }}
                                            >
                                                {room[key]}
                                            </TableCell>
                                        ))}
                                    </TableRow>
                                ))}
                            </TableBody>
                        </Table>
                    </TableContainer>
                ) : (
                    <Typography variant="h6" align="center" sx={{ padding: '20px' }}>
                        No Data Available for the selected date.
                    </Typography>
                )}
            </Box>
        </Box>
    );
};

export default Report;